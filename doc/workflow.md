# 開発ワークフロー

本プロジェクトでは、GitHub Flowをベースとした開発ワークフローを採用します。

## 1. ブランチ戦略

- `main` ブランチを常にデプロイ可能な状態に保ちます。
- 新しい機能開発やバグ修正を行う際は、必ず `main` ブランチから新しいブランチを切って作業を行います。ブランチ名は、作業内容がわかるように `feature/` や `bugfix/` などのプレフィックスを付け、簡潔に記述します（例: `feature/ollama-api-integration`, `bugfix/cli-input-issue`）。

## 2. 開発フェーズ

### 2.1. 要件定義

- **目的**: 開発する機能の要件を明確にする。
- **アウトプット**: `issues/` ディレクトリにタスクとしてIssueを起票。

### 2.2. 設計

- **目的**: 要件定義で明確になった機能をどのように実装するかを具体的に設計する。
- **アウトプット**: `doc/` ディレクトリに設計ドキュメントをMarkdown形式で作成。図を描く場合はPlantUML形式でMarkdownにコードブロックとして記載。

### 2.3. 実装（TDD）

- **目的**: テストを先に書き、要件を満たす最小実装を段階的に作る。
- **アウトプット**: 失敗するテスト -> テストを通す実装 -> リファクタリング済みコード。
- **進め方（Red-Green-Refactor）**:
  - **Red**: 先にテストを書き、失敗することを確認する。
  - **Green**: テストを通すための最小実装を行う。
  - **Refactor**: テストを維持したまま設計・可読性を改善する。
  - 1機能あたりこのサイクルを小さく繰り返す。

### 2.4. テスト

- **目的**: TDDサイクル内で要件を継続的に検証し、回帰を防止する。
- **アウトプット**: テストコードとテスト実行結果。
- **実行**: 各TDDサイクルの完了時、およびコミット前に必ず以下のテストを実行し、すべてのテストがパスすることを確認します。
  - **ユニットテスト**: 個々のコンポーネントや関数の単体テスト。
  - **結合テスト**: 複数のコンポーネントが連携する部分のテスト。
    テストコマンドはプロジェクトの進捗に合わせて定義されますが、現時点では以下のコマンドを想定します。
  ```bash
  # 例: テスト実行コマンド
  npm test
  ```

### 2.5. レビュー

- **目的**: 実装されたコードの品質、設計との整合性、ベストプラクティスへの準拠などを確認する。
- **アウトプット**:
  - 問題点がなければドキュメンテーションなし。
  - 問題点がある場合は `issues/` ディレクトリにタスクまたは不具合としてIssueを起票。

## 3. 開発サイクル (GitHub Flow)

1.  **ブランチの作成**: `main` ブランチから新しいブランチを作成します。
    ```bash
    git checkout main
    git pull origin main
    git checkout -b feature/your-feature-name
    ```
2.  **テストの追加（Red）**: まず失敗するテストを追加し、要件をテストで表現します。
3.  **最小実装（Green）**: 追加したテストを通すための最小実装を行います。
4.  **リファクタリング（Refactor）**: 挙動を変えずに構造を改善し、再度テストを実行します。
5.  **コミット**: 変更内容をコミットします。コミットメッセージは、変更内容を簡潔かつ明確に記述し、日本語で記述します。
    ```bash
    git add .
    git commit -m "feat: 新機能の追加"
    ```
6.  **プッシュ**: 作業ブランチをリモートリポジリにプッシュします。
    ```bash
    git push origin feature/your-feature-name
    ```
7.  **プルリクエスト (Pull Request) の作成**: リモートリポジトリにプッシュ後、GitHub上で `main` ブランチへのプルリクエストを作成します。
8.  **コードレビュー**: チームメンバーによるコードレビューを受けます。必要に応じて修正を行い、再度TDDサイクルで対応してプッシュします。
9.  **マージ**: コードレビューが承認され、CI上でテストがすべてパスしたら、プルリクエストを `main` ブランチにマージします。マージはSquash and MergeまたはRebase and Mergeを推奨します。

## 4. デプロイと運用・保守

現時点では、デプロイと運用・保守フェーズは考慮しません。開発に注力します。
